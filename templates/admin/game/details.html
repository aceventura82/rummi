<!DOCTYPE html>
<html lang="{{request.session.lang|default:'es'}}">
	{% load static %}
	{% load i18n %}
	{% load extratags %}
	{% include "admin/head.html" %}
	<link href="{% static 'adminSoccerPool/vendors/mjolnic-bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css' %}" rel="stylesheet">
	<body class="nav-md">
		<div class="container body">
			<div class="main_container">
				{% include "admin/header.html" %}
				<div class="right_col" role="main">
					<div class="clearfix"></div>
					<div class="page-title">
						<div class="title_left">
							<h3>{{data.name}}</h3>
						</div>
					</div>
					<!-- CONTENT -->
						<div class="row">
							<!--  Tournament Info -->
							<div class="col-md-12 col-sm-12 col-xs-12">
								<div class="x_panel">
									<div class="x_title collapse-link">
										<h2><i class="fa fa-file-text" style="margin-right:1em;"></i>{% trans 'TournamentInfo' %}</h2>
										<ul class="nav navbar-right panel_toolbox">
											<li><a ><i class="fa fa-chevron-down"></i></a></li>
										</ul>
										<div class="clearfix"></div>
									</div>
									<div class="x_content collapse editPerm collapse">
										<br />
										<form method="post" data-parsley-validate class="form-horizontal form-label-left" enctype = "multipart/form-data">
											{% csrf_token %}
											<div class="form-group">
												<label class="control-label col-md-3 col-sm-3 col-xs-12">{% trans 'Name'%}<span class="required">*</span>
												</label>
												<div class="col-md-6 col-sm-6 col-xs-12">
													<input type="text" name="name" required="required" class="form-control col-md-7 col-xs-12" value='{{ data.name }}'>
												</div>
											</div>
											<div class="control-group">
												<label class="control-label col-md-3 col-sm-3 col-xs-12">{% trans 'StartDate' %} - {% trans 'EndDate' %}<span class="required">*</span>
												</label>
												<div class="controls">
													<div class="input-prepend input-group col-md-6 col-sm-6 col-xs-12">
														<span class="add-on input-group-addon"><i class="glyphicon glyphicon-calendar fa fa-calendar"></i></span>
														<input type="text" name="dates" class="form-control" required="required" value='{{ data.startDate|date:"Y-m-d H:i" }} - {{ data.endDate|date:"Y-m-d H:i" }}' />
													</div>
												</div>
												<input type="hidden" name="startDate" value="{{data.endDate|date:'Y-m-d H:i:s'}}">
												<input type="hidden" name="endDate" value="{{data.endDate|date:'Y-m-d H:i:s'}}">
											</div>
											<div class="form-group">
												<label class="control-label col-md-3 col-sm-3 col-xs-12">{% trans 'Status' %}<span class="required">*</span>
												</label>
												<div class="checkbox col-md-6 col-sm-6 col-xs-12">
													<label>
														<input type="checkbox" class="flat" name="status" style="color:blue;background:red" value="1" {{status}}>
													</label>
												</div>
											</div>
											<div class="form-group">
												<label class="control-label col-md-3 col-sm-3 col-xs-12">{% trans 'CurrentPhase'%}<span class="required">*</span>
												</label>
												<div class="col-md-3 col-sm-3 col-xs-6">
													<select  class="form-control" required name="current_phase">
													 {% for i in i|rjust:9 %}
														 {% if forloop.counter == data.current_phase %}
														 <option  selected>{{forloop.counter}}</option>
														 {% else %}
														 <option >{{forloop.counter}}</option>
														 {% endif %}
													 {%endfor %}
													</select>
												</div>
											</div>
											<div class="form-group">
												<div class="image-upload">
													<label class="control-label col-md-3 col-sm-3 col-xs-12">{% trans 'File' %}<span class="required">*</span>
													</label>
													<input id="ImageFile" name="tournamentLogo" type="file"/>
												</div>
											</div>
											<div align="center">
												<img src="{% static 'tournament/' %}{{data.id}}.png" height="200px" alt="{%trans 'TorunamentLogo'%}" />
											</div>
											<div class="ln_solid"></div>
											<div class="form-group">
												<div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
													<button type="submit" value="1"  name="editBT" class="btn btn-success">{% trans 'Edit' %}</button>
													<button class="btn btn-primary" type="reset">{% trans 'Reset' %}</button>
													<input class="btn btn-danger " type="submit" value="{% trans 'Delete' %}" name="deleteBT" onclick="if(confirm('{% trans "DeleteTournament" %}')){this.form.submit();}else{return false;}" {{request.session.valDel}}>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
							<!-- Matches -->
							<div class="col-md-12 col-sm-12 col-xs-12">
								 <div class="x_panel">
									<div class="x_title collapse-link">
										<h2><i class="fa fa-soccer-ball-o" style="margin-right:1em;"></i>{% trans 'Matches' %}</h2>
										<ul class="nav navbar-right panel_toolbox">
											{% if matches_vals.3 > 0 %}
                      <li><a href="javascript:;" title="{% trans 'MissingScore' %}" style="color:red;"><i class="fa fa-exclamation-triangle"></i> {{matches_vals.3}}</a></li>
											{% endif %}
											{% if matches_vals.2 > 0 %}
                      <li><a href="javascript:;" title="{% trans 'Running' %}" style="color:green;"><i class="fa fa-play-circle"></i> {{matches_vals.2}}</a></li>
											{% endif %}
											{% if matches_vals.1 > 0 %}
											<li><a href="javascript:;" title="{% trans 'Active' %}" style="color:#55aaff;"><i class="fa fa-clock-o"></i> {{matches_vals.1}}</a></li>
											{% endif %}
											{% if matches_vals.0 > 0 %}
                      <li><a href="javascript:;" title="{% trans 'Ended' %}"><i class="fa fa-bookmark-o"></i> {{matches_vals.0}}</a></li>
											{% endif %}
											{% if matches_vals.4 > 0 %}
                      <li><a href="javascript:;" title="{% trans 'Deactivate' %}" style="color:orange;"><i class="fa fa-toggle-off"></i> {{matches_vals.4}}</a></li>
											{% endif %}
											<li><a href="match/new/" title="{% trans 'NewMatch' %}"><i class="fa fa-plus"></i></a></li>
											<li><a ><i class="fa fa-chevron-down"></i></a></li>
										</ul>
										<div class="clearfix"></div>
									</div>
									<div class="x_content collapse">
										<br />
										<table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
											<thead>
												<tr>
													<th>{% trans 'Date' %}</th>
													<th>{% trans 'Group' %}</th>
													<th>{% trans 'Match' %}</th>
													<th>{% trans 'Status' %}</th>
												</tr>
											</thead>
											<tbody>
												{% for match in match_data %}
												<tr onclick="window.location.href='match/{{match.id}}'">
													<td>
														{{match.date}}
													</td>
													<td>
														{{match.group|default:'---'}}
													</td>
													<td>
														<div class="col-md-5 col-sm-5 col-xs-5" style="text-align:right">
															<h4>
																<img src='{% static "teamShields/"%}{{match.localTeamId.id}}.png' alt="Team Shield" height="20px">
																<small style="margin-right:1em;">{{match.localTeamId.name}}</small>
																{{match.scoreLocal|default_if_none:'&nbsp;'}}
															</h4>
														</div>
														<div class="col-md-2 col-sm-2 col-xs-2" style="text-align:center">
															VS.
														</div>
														<div class="col-md-5 col-sm-5 col-xs-5">
															<h4>
																{{match.scoreVisitor|default_if_none:'&nbsp;'}}
																<small style="margin-left:1em;">{{match.visitorTeamId.name}}</small>
																<img src='{% static "teamShields/"%}{{match.visitorTeamId.id}}.png' alt="Team Shield" height="20px">
															</h4>
														</div>
													</td>
													<td style="text-align:center">
														{% getMatchStatusColor match.date match.status match.scoreLocal %}
													</td>
												</tr>
												{% endfor %}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					<!-- END CONTENT -->
				</div>
			</div>
		</div>
		{% include "admin/footer.html" %}
		<script>
			$(function() {
			  $('input[name="dates"]').daterangepicker({
			    timePicker: true,
					timePicker24Hour: true,
			    startDate: '{{data.startDate|date:"Y-m-d H:i"}}',
			    endDate: '{{data.endDate|date:"Y-m-d H:i"}}',
			    locale: {
			      format: 'Y-MM-DD HH:mm'
			    }
			  });
				$('input[name="date"]').daterangepicker({
					timePicker: true,
					singleDatePicker: true,
					timePicker24Hour: true,
					startDate: moment().startOf('hour').add(1, 'hour'),
					locale: {
						format: 'Y-MM-DD HH:mm'
					}
				});
			});
		</script>
	</body>
</html>
